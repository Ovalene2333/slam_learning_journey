# 2. 一台RMUL的哨兵需要什么?

RMUL会是大部分RMer或者哨兵算法接触到的第一场正式比赛。以

## 关于地图

### 不能建图怎么办

众所周知,RMUL的哨兵是没有建图时间的,但是实际上导航的运行也并不一定依赖一个固定的"地图",大多数情况下你只需要能够维持一个`map`—>`base_link`的`tf`变换就可以了。一般来说,`map`坐标系由`map_server`提供,至于`map`—>`base_link`,众所周知也有多种形式,这里举两个例子

> 这里要求camera_init的z轴是和map的z轴平行的,如果你的雷达是斜放的,请参考[5.如何驯服斜放的雷达.md](../SLAM/5.如何驯服斜放的雷达.md)

1. 直接基于里程计的,`map`—tf_static->`camera_init`-LIO->`body`—tf_static->`base_link`

2. 基于里程计和重定位的(这里展示一种形式),`map`—tf_static->`map3d`—Localization->`camera_init`-LIO->`body`—tf_static->`base_link`

由于无法建图,这里使用1就行。一般来说联盟赛的场地和比赛烈度不会导致里程计的严重偏移。

而对于2D栅格地图的问题,其实很简单。导航一般都有计算机视觉基础,下面提供一个简明的流程。

1. 在规则手册上对场地截图.
2. 根据你的需求二值化.
3. 根据场地大小计算`pgm`的尺寸,把你的二值图`resize`一下.
4. 根据你的出生点,转换成`pgm`格式和正确地写入`yaml`.

## 导航与避障

首先不得不承认的一点就是对于哨兵来说,就重要性而言,火力>导航到点>避障。能不能打出伤害,能不能导航到正确的位置,比能不能优雅的避障是更重要的技术需要,一般而言,哨兵撞两下无所谓.

> 严正声明:我不是恶意想撞别的队伍的车的,只是我太菜了,避障没做好.

而基于这种得过且过的态度,其实导航只需要:
1. 把`nav2`或者`move_base`的一些基本参数调好.
2. follow好`global_plan`,输出速度.
3. 在出现障碍的时候等待并跟随新`path`而不至于一头撞上去.
4. 在不小心陷入障碍的时候`escape`.
然后基本就是选方案、调参、测试了,没有太多好说的,略.

